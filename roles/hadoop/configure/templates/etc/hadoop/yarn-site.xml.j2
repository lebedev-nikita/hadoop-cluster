{% set principal = "yarn/_HOST@HADOOP.CONSULTANT.RU" %}
<configuration>
  <property>
    <name>yarn.resourcemanager.hostname</name>
    <value>{{ master_host }}</value>
  </property>
  <property>
    <name>yarn.server.resourcemanager.application.expiry.interval</name>
    <value>60000</value>
  </property>
  <property>
    <name>yarn.nodemanager.aux-services</name>
    <value>mapreduce_shuffle</value>
  </property>
  <property>
    <name>yarn.nodemanager.aux-services.mapreduce.shuffle.class</name>
    <value>org.apache.hadoop.mapred.ShuffleHandler</value>
  </property>
  <property>
    <name>yarn.log-aggregation-enable</name>
    <value>true</value>
  </property>
  <property>
    <name>yarn.log-aggregation.retain-seconds</name>
    <value>-1</value>
  </property>
  <property>
    <name>yarn.application.classpath</name>
    <value>${HADOOP_CONF_DIR},${HADOOP_COMMON_HOME}/share/hadoop/common/*,${HADOOP_COMMON_HOME}/share/hadoop/common/lib/*,${HADOOP_HDFS_HOME}/share/hadoop/hdfs/*,${HADOOP_HDFS_HOME}/share/hadoop/hdfs/lib/*,${HADOOP_MAPRED_HOME}/share/hadoop/mapreduce/*,${HADOOP_MAPRED_HOME}/share/hadoop/mapreduce/lib/*,${HADOOP_YARN_HOME}/share/hadoop/yarn/*,${HADOOP_YARN_HOME}/share/hadoop/yarn/lib/*</value>
  </property>
  
  <property>
    <name>yarn.resourcemanager.principal</name>
    <value>{{ principal }}</value>
  </property>
  <property>
    <name>yarn.nodemanager.principal</name>
    <value>{{ principal }}</value>
  </property>
  <property>
    <name>yarn.resourcemanager.keytab</name>
    <value>{{ keytab_path }}</value>
  </property>
  <property>
    <name>yarn.nodemanager.keytab</name>
    <value>{{ keytab_path }}</value>
  </property>
</configuration>
