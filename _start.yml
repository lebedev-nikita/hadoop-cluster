- hosts: zk_hosts
  become: yes
  roles:
    - role: zookeeper/start
      when: services is not defined or "zookeeper" in services

- hosts: masters
  become: yes
  roles:
    - role: hadoop/format
      when: (services is not defined or "hadoop" in services) and need_format
    - role: hadoop/start
      when: (services is not defined or "hadoop" in services)
    - role: hbase/start
      when: (services is not defined or "hbase" in services)
    - role: spark/format
      when: (services is not defined or "spark" in services) and need_format
    - role: spark/start
      when: (services is not defined or "spark" in services)
    - role: hive/format
      when: (services is not defined or "hive" in services) and need_format
    - role: hive/start
      when: (services is not defined or "hive" in services)
